<!DOCTYPE html>
<html lang="fr">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">


    <title>Charika - Fiche d'Identit&eacute; Sociétè : ${(_stEntrepriseMkt._sDenomination)!}</title>

    <#include "_include-header-meta-faveicon-css-font.ftl"/>




    <#include "_include.common-js.ftl">
    <link href="mosaic_css_beta/wizard/css/paper-bootstrap-wizard.css" rel="stylesheet"/>
    <link rel="stylesheet" href="mosaic_css_beta/annonce_legale.css" />
    <link rel="stylesheet" href="mosaic_css_beta/basic.css" />
    <link rel="stylesheet" href="mosaic_css_beta/dropzone.css" />
    <link href="mosaic_css_beta/css_mod_actualite.css" rel="stylesheet">
    <link href="mosaic_css_beta/jquery.urlive.css" rel="stylesheet">
    <link rel="stylesheet" href="mosaic_css_beta/bjqs.css">
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/raty/2.7.1/jquery.raty.min.css">
    <link rel="stylesheet" type="text/css" href="mosaic_css_beta/k_home_style.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
    <link href="mosaic_css_beta/jquery.vector-map.css" media="screen" rel="stylesheet" type="text/css"/>

    <script src="https://kit.fontawesome.com/78efd24492.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.3.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.0/jquery.validate.min.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.0/additional-methods.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parse/2.5.1/parse.js"></script>

    <script src="mosaic_js/annonce-legale.js"></script>

</head>

<body class="body-blue resultat choices-border ">

<input type="hidden" class="hidden-service-edition service-edition">

<#include "_include.header.ftl"/>
<div class="wrapper my-wrapper" style="padding:0; position: relative;width: 100%">

    <!-- Topic Header -->
    <div class="jumbotron first ficheJ" id="jumbotron-first" style="padding:28px 0 0">
        <div class="jumbotron-overlay">
            <div class="container">
                <div class="row">
                    <div class="col-md-5" style="margin-top: 18px;">
                        <a class="home-annonce" href="annonce"><span style=" margin: 0px"><h3 style="margin-top: 0px;margin-bottom: 0px;">ANNONCE LÉGALE <span style="font-size: 13px;margin-left: 5px;">charika.ma</span></h3></span></a>
                        <h5><b>Publiez votre annonce en toute simplicité</b></h5>
                    </div>
                    <div><a href="annonce"><img src="mosaic_img/vector-annonce-legale.png" class=" pull-right" style="width: 270px;height: 143px;"></a></div>
                </div>
            </div>
        </div> <!-- / .container -->
    </div>
</div><!-- / .color-jumbotron -->
<div class="wrapper bg-radial-blue" style="font-size: 0.9em;">
    <!----------------------------------------------------------------------------------Content---------------------------------------------------- -->
    <div class="container">
        <div class="panel panel-default ligne-resultat panel-bluex">
            <div class="panel-body" style="padding:0px">

                <div style="margin: 8px 0px 13px 4px;">
                    <h4  class="text-center" style=" margin-bottom: 6px;"> ${type_annonce}</h4>

                </div>


                <div style="height:121px;">
                    <div class=" wizard-card" data-color="orange" id="wizardProfile" style="min-height:0px;">
                        <div class="wizard-navigation">
                            <div class="progress-with-circle">
                                <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="3" style="width: 50%; background-color:#D97A44 !important;"></div>
                            </div>
                            <ul class="nav nav-pills">
                                <li style="width: 40%;">
                                    <a href="annonce-etape-modele" aria-expanded="true" style="max-width: 124px !important;"><div class="icon-circle checked" style="border-color:rgb(231, 139, 0); "><span class="ti-">1</span></div>Choix du modèle</a>
                                </li>
                                <li style="width: 20%;" class="active">
                                    <a href="javascript:void(0)" aria-expanded="false" style="color:rgb(231, 139, 0); "><div class="icon-circle checked" style="border-color:rgb(231, 139, 0);" ><span class="ti-"><b>2</b></span></div>Saisie</a>
                                </li>
                                <li style="width: 40%;" class="">
                                    <a href="javascript:void(0)" id="validation" aria-expanded="false"><div class="icon-circle checked" style=" border-color:rgb(231, 139, 0); "><span class="ti-"><b>3</b></span></div>Validation</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!------------------------------------------ left   ------------------------------------------->
                <div>


                    <!-- -----------------------------------------Forms --------------------------------------------------------------- -->
                    ${form}
                    <!-- -----------------------------------------Forms --------------------------------------------------------------- -->



                    <!------------------------------------------ Right  ------------------------------------------->

                    <!-- ------------------------------------------------------------right--------------------------------------------------- -->
                    <div class="col-md-4 ddivvleft annonce-scroll" style="" id="annonce">
                        <div class="panel panel-default ligne-resultat panel-bluex filter " style="margin-bottom: 2px; margin-top:36px">
                            <div class="panel-heading text-center"><h5 class="titre">Votre annonce</h5></div>
                            <div class="panel-body" style="font-size: 1.1em; padding-left: 20px;">
                                <@text_annonce?interpret />
                            </div>
                            <div class="panel panel-default ligne-resultat panel-bluex" style="padding-bottom: 0px;margin-top: 14px;">
                                <div class="panel-body" style="color:#EC860A; font-weight: bold;">
                                    <h5 class="text-center" style="margin-top: 0px;margin-bottom: 0px;"> Service Client</h5>
                                    <h5 class="text-center" style="margin-top: 0px;margin-bottom: 0px;">+212 5 22 27 64 16</h5>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top:19px; width: -25px;" class="col-md-12" id="footer-lwizard">
                            <a href="annonce-etape-modele" class="btn btn-sm btn-orange  pull-left"  style="margin-left: 11px;margin-bottom: 10px;padding-left: 25px;padding-right: 25px;padding-top: 7px;padding-bottom: 7px;">Étape précédente</a>
                            <a class="btn btn-sm  btn-orange pull-right" id="next-page" style="margin-right: 11px;margin-bottom: 10px;padding-top: 7px;padding-bottom: 7px;padding-left: 25px;padding-right: 25px;margin-left: 124px;">Étape suivante </a>
                        </div>
                    </div> <!-- / .row -->
                </div>



                <!------------------------------------------------------------ accompangnement ----------------------------------------------------------->
                <div class="panel panel-default ligne-resultat panel-bluex filter " style="margin:22px ;background: #EEEEEE;">
                    <div class="panel-body" style="font-size: 1.1em;  padding-left: 20px; margin-top: 12px; padding-bottom: 3px;">
                        <div class="col-md-1" style="padding-left: 0px;padding-right: 0px;margin-bottom: 0px;padding-bottom: 15px;">
                            <img src="mosaic_img/wiz-etape1-annonce-2.png" style="width: 86px;">
                        </div>
                        <div class="col-md-11">
                            ${aide_annonce}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>
<!-- --------------------------------------------------- fin ---------------------------------------------------------------------- -->




<!-- ----------------------------------------------------------Fin Modal----------------------------------------------------------- -->

<#include "_include.footer.ftl">
</body>
<script>



    $(window).load(function() {


        var pointer=0;


        $.ajax({
            dataType : 'json',
            type: "POST",
            url: "annonce-etape-loaddata",
            success : function(data) {

                $.each(data, function(key, value){

                    if(value[0] == '['){
                        var values = JSON.parse(data[key]);
                        for (var i = 0; i < values.length; i++) {
                            var value = values[i];
                            console.log(value.adresse+"   "+value.nom);
                            addMember(value.nom,value.prenom,value.adresse,value.ville,value.codePostal,key)
                        }
                    }
                    else {
                        $("[data-name="+key+"]").text(""+value+"");
                        $("#"+key+"").val(""+value+"");

                    }
                })


            },
            error : function(data){
                alert("erreur");
            }
        });



        synchronise();

        function synchronise( ){



            $("input[name]").each(function(  ) {
                var element = $( this ).attr("name");
                console.log(element);
                $("#"+element).keyup(function () {

                    var val2 = $("#"+element).val();
                    $("[data-name="+element+"]").text(function (val) {
                        return "" + val2 + "";
                    });
                });
            });

            $("select[name]").each(function(  ) {
                var element = $( this ).attr("name");
                console.log(element);
                $("#"+element).change(function () {
                    var val2 = $("#"+element).val();
                    $("[data-name="+element+"]").text(function (val) {
                        return "" + val2 + "";
                    });
                });
            });

            $("textarea[name]").each(function(  ) {
                var element = $( this ).attr("name");
                console.log(element);
                $("#"+element).keyup(function () {
                    var val2 = $("#"+element).val();
                    $("[data-name="+element+"]").text(function (val) {
                        return "" + val2 + "";
                    });
                });
            });

            $("#objet").change(function () {
                var val2 = $("#objet").val();
                $("[data-name=objet]").text(function (val) {
                    return "" + val2 + "";
                });
            });





        }


        synchronise2(["associes","dirigeants"]);

        function synchronise2(fields){

            fields.forEach(function(element) {
                $("#add-"+element).click(function () {

                    clearForm(element);
                    $("#titre-modal-"+element).text("Ajouter ");
                    $("#btn-modal-"+element).text("Ajouter");
                    if($("#btn-modal-"+element).length == 0) {

                        $("#btn-modal-"+element+"-edit").attr("id","btn-modal-"+element);
                        $("#btn-modal-"+element).removeAttr('data-dismiss');
                    }

                });
                $("#btn-modal-"+element).click(function () {
                    if ($("#form-add-"+element).valid()) {
                        $("#btn-modal-"+element).attr('data-dismiss','modal');

                    }

                });
                $(document).on('click',"#btn-modal-"+element,function () {
                    if ($("#form-add-"+element).valid()) {

                        addMember($("#name-"+element).val(),$("#firstname-"+element).val(), $("#adresse-"+element).val(),$("#ville-"+element).val(),$("#codepostal-"+element).val(),element)

                    }
                });


                $(document).on('click','.delete', function(){
                    var name= $(this).parent().parent().attr("data-name").remove();
                });

                $(document).on('click','.edit-'+element, function(){

                    column=$(this).parent().parent();
                    clearForm(element);
                    $("#btn-modal-"+element).text("Modifier");
                    $("#titre-modal-"+element).text("Modifier ");
                    $("#name-"+element).val($(this).parent().parent().children().eq(0).text());
                    $("#firstname-"+element).val($(this).parent().parent().children().eq(1).text());
                    $("#adresse-"+element).val($(this).parent().parent().children().eq(2).children().eq(0).text());
                    $("#codepostal-"+element).val($(this).parent().parent().children().eq(2).children().eq(2).text());
                    $("#ville-"+element).val($(this).parent().parent().children().eq(2).children().eq(1).text());


                    if($("#btn-modal-"+element+"-edit").length == 0) {
                        $("#btn-modal-"+element).attr("id","btn-modal-"+element+"-edit");
                        $("#btn-modal-"+element+"-edit").removeAttr('data-dismiss');
                    }


                });
                $(document).on('click','#btn-modal-'+element+'-edit', function(){

                    if ($("#form-add-"+element+"").valid()) {

                        $("#btn-modal-"+element+"-edit").attr('data-dismiss','modal');
                        var str2 = "<td class='titre'>" + $("#name-"+element).val() + "</td>"
                            + "<td >" + $("#firstname-"+element).val() + "</td>"
                            + "<td ><span>" + $("#adresse-"+element).val() + "</span>  <span>" + $("#ville-"+element).val() + "</span>  <span>" + $("#codepostal-"+element).val() + "</span></td>"
                            + "<td class=' text-center'>"
                            + " <span class='cancelicon- delete' style='color:red;'></span>"
                            + "</td>"
                            + "<td class='text-center'>"
                            + "<span class='edit-"+element+"'  data-toggle='modal' data-target='#modal-"+element+"'><i class='fas fa-pencil-alt' style='color:#2790B0'></i></span>"
                            + "</td>";
                        column=column.html(str2);
                    }

                });
            });

        }
        function addMember(name,firstname,adresse,ville,codepostal,key){
            pointer=pointer+1;
            var str2 = " <tr [data-name="+pointer+"]>"
                + "<td class='titre'>" + name + "</td>"
                + "<td >" + firstname + "</td>"
                + "<td ><span>" + adresse + "</span>  <span>" + ville + "</span>  <span>" + codepostal + "</span></td>"
                + "<td class=' text-center'>"
                + " <span class='cancelicon- delete' style='color:red;'></span>"
                + "</td>"
                + "<td class='text-center'>"
                + "<span class='edit-"+key+"' data-toggle='modal' data-target='#modal-"+key+"'><i class='fas fa-pencil-alt' style='color:#2790B0'></i></span>"
                + "</td></tr>";
            var str ="<p [data-name="+pointer+"]>"+name+" "+firstname+" "+adresse+" "+ ville+" "+codepostal+"</p>";
            $("[data-name="+key+"]").append(str);
            $("#body-"+key).append(str2);
        }
        function clearForm(key) {
            $("#name-"+key).val("");
            $("#firstname-"+key).val("");
            $("#adresse-"+key).val("");
            $("#codepostal-"+key).val("");
            $("ville-"+key).val("");

        }



    });



</script>

</html>
